{% extends 'base.html' %}

{% block title %}Arabic Bible Search{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1 class="mb-4">Arabic Bible Search</h1>
    
    <div class="card mb-4">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0">Search Form</h5>
        </div>
        <div class="card-body">
            <form action="/arabic/search" method="get">
                <div class="row g-3">
                    <div class="col-md-6">
                        <label for="searchQuery" class="form-label">Search Query</label>
                        <input type="text" class="form-control" id="searchQuery" name="q" value="{{ query or '' }}" placeholder="Enter Arabic text to search..." dir="rtl">
                    </div>
                    <div class="col-md-4">
                        <label for="bookFilter" class="form-label">Book Filter (Optional)</label>
                        <select class="form-select" id="bookFilter" name="book">
                            <option value="">All Books</option>
                            <optgroup label="Old Testament">
                                <option value="Genesis" {% if book == 'Genesis' %}selected{% endif %}>Genesis</option>
                                <option value="Exodus" {% if book == 'Exodus' %}selected{% endif %}>Exodus</option>
                                <option value="Leviticus" {% if book == 'Leviticus' %}selected{% endif %}>Leviticus</option>
                                <option value="Numbers" {% if book == 'Numbers' %}selected{% endif %}>Numbers</option>
                                <option value="Deuteronomy" {% if book == 'Deuteronomy' %}selected{% endif %}>Deuteronomy</option>
                                <option value="Joshua" {% if book == 'Joshua' %}selected{% endif %}>Joshua</option>
                                <option value="Judges" {% if book == 'Judges' %}selected{% endif %}>Judges</option>
                                <option value="Ruth" {% if book == 'Ruth' %}selected{% endif %}>Ruth</option>
                                <option value="1 Samuel" {% if book == '1 Samuel' %}selected{% endif %}>1 Samuel</option>
                                <option value="2 Samuel" {% if book == '2 Samuel' %}selected{% endif %}>2 Samuel</option>
                                <option value="1 Kings" {% if book == '1 Kings' %}selected{% endif %}>1 Kings</option>
                                <option value="2 Kings" {% if book == '2 Kings' %}selected{% endif %}>2 Kings</option>
                                <option value="1 Chronicles" {% if book == '1 Chronicles' %}selected{% endif %}>1 Chronicles</option>
                                <option value="2 Chronicles" {% if book == '2 Chronicles' %}selected{% endif %}>2 Chronicles</option>
                                <option value="Ezra" {% if book == 'Ezra' %}selected{% endif %}>Ezra</option>
                                <option value="Nehemiah" {% if book == 'Nehemiah' %}selected{% endif %}>Nehemiah</option>
                                <option value="Esther" {% if book == 'Esther' %}selected{% endif %}>Esther</option>
                                <option value="Job" {% if book == 'Job' %}selected{% endif %}>Job</option>
                                <option value="Psalms" {% if book == 'Psalms' %}selected{% endif %}>Psalms</option>
                                <option value="Proverbs" {% if book == 'Proverbs' %}selected{% endif %}>Proverbs</option>
                                <option value="Ecclesiastes" {% if book == 'Ecclesiastes' %}selected{% endif %}>Ecclesiastes</option>
                                <option value="Song of Solomon" {% if book == 'Song of Solomon' %}selected{% endif %}>Song of Solomon</option>
                                <option value="Isaiah" {% if book == 'Isaiah' %}selected{% endif %}>Isaiah</option>
                                <option value="Jeremiah" {% if book == 'Jeremiah' %}selected{% endif %}>Jeremiah</option>
                                <option value="Lamentations" {% if book == 'Lamentations' %}selected{% endif %}>Lamentations</option>
                                <option value="Ezekiel" {% if book == 'Ezekiel' %}selected{% endif %}>Ezekiel</option>
                                <option value="Daniel" {% if book == 'Daniel' %}selected{% endif %}>Daniel</option>
                                <option value="Hosea" {% if book == 'Hosea' %}selected{% endif %}>Hosea</option>
                                <option value="Joel" {% if book == 'Joel' %}selected{% endif %}>Joel</option>
                                <option value="Amos" {% if book == 'Amos' %}selected{% endif %}>Amos</option>
                                <option value="Obadiah" {% if book == 'Obadiah' %}selected{% endif %}>Obadiah</option>
                                <option value="Jonah" {% if book == 'Jonah' %}selected{% endif %}>Jonah</option>
                                <option value="Micah" {% if book == 'Micah' %}selected{% endif %}>Micah</option>
                                <option value="Nahum" {% if book == 'Nahum' %}selected{% endif %}>Nahum</option>
                                <option value="Habakkuk" {% if book == 'Habakkuk' %}selected{% endif %}>Habakkuk</option>
                                <option value="Zephaniah" {% if book == 'Zephaniah' %}selected{% endif %}>Zephaniah</option>
                                <option value="Haggai" {% if book == 'Haggai' %}selected{% endif %}>Haggai</option>
                                <option value="Zechariah" {% if book == 'Zechariah' %}selected{% endif %}>Zechariah</option>
                                <option value="Malachi" {% if book == 'Malachi' %}selected{% endif %}>Malachi</option>
                            </optgroup>
                            <optgroup label="New Testament">
                                <option value="Matthew" {% if book == 'Matthew' %}selected{% endif %}>Matthew</option>
                                <option value="Mark" {% if book == 'Mark' %}selected{% endif %}>Mark</option>
                                <option value="Luke" {% if book == 'Luke' %}selected{% endif %}>Luke</option>
                                <option value="John" {% if book == 'John' %}selected{% endif %}>John</option>
                                <option value="Acts" {% if book == 'Acts' %}selected{% endif %}>Acts</option>
                                <option value="Romans" {% if book == 'Romans' %}selected{% endif %}>Romans</option>
                                <option value="1 Corinthians" {% if book == '1 Corinthians' %}selected{% endif %}>1 Corinthians</option>
                                <option value="2 Corinthians" {% if book == '2 Corinthians' %}selected{% endif %}>2 Corinthians</option>
                                <option value="Galatians" {% if book == 'Galatians' %}selected{% endif %}>Galatians</option>
                                <option value="Ephesians" {% if book == 'Ephesians' %}selected{% endif %}>Ephesians</option>
                                <option value="Philippians" {% if book == 'Philippians' %}selected{% endif %}>Philippians</option>
                                <option value="Colossians" {% if book == 'Colossians' %}selected{% endif %}>Colossians</option>
                                <option value="1 Thessalonians" {% if book == '1 Thessalonians' %}selected{% endif %}>1 Thessalonians</option>
                                <option value="2 Thessalonians" {% if book == '2 Thessalonians' %}selected{% endif %}>2 Thessalonians</option>
                                <option value="1 Timothy" {% if book == '1 Timothy' %}selected{% endif %}>1 Timothy</option>
                                <option value="2 Timothy" {% if book == '2 Timothy' %}selected{% endif %}>2 Timothy</option>
                                <option value="Titus" {% if book == 'Titus' %}selected{% endif %}>Titus</option>
                                <option value="Philemon" {% if book == 'Philemon' %}selected{% endif %}>Philemon</option>
                                <option value="Hebrews" {% if book == 'Hebrews' %}selected{% endif %}>Hebrews</option>
                                <option value="James" {% if book == 'James' %}selected{% endif %}>James</option>
                                <option value="1 Peter" {% if book == '1 Peter' %}selected{% endif %}>1 Peter</option>
                                <option value="2 Peter" {% if book == '2 Peter' %}selected{% endif %}>2 Peter</option>
                                <option value="1 John" {% if book == '1 John' %}selected{% endif %}>1 John</option>
                                <option value="2 John" {% if book == '2 John' %}selected{% endif %}>2 John</option>
                                <option value="3 John" {% if book == '3 John' %}selected{% endif %}>3 John</option>
                                <option value="Jude" {% if book == 'Jude' %}selected{% endif %}>Jude</option>
                                <option value="Revelation" {% if book == 'Revelation' %}selected{% endif %}>Revelation</option>
                            </optgroup>
                        </select>
                    </div>
                    <div class="col-md-2 d-flex align-items-end">
                        <button type="submit" class="btn btn-primary w-100">Search</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    
    {% if results %}
    <div class="card">
        <div class="card-header bg-success text-white">
            <h5 class="mb-0">Search Results ({{ results.count }} matches)</h5>
        </div>
        <div class="card-body">
            {% if results.count > 0 %}
                <div class="list-group">
                    {% for verse in results.results %}
                        <a href="/arabic/verse/{{ verse.book_name }}/{{ verse.chapter_num }}/{{ verse.verse_num }}" class="list-group-item list-group-item-action">
                            <div class="d-flex w-100 justify-content-between">
                                <h5 class="mb-1">{{ verse.book_name }} {{ verse.chapter_num }}:{{ verse.verse_num }}</h5>
                            </div>
                            <p class="mb-1" dir="rtl" style="text-align: right; font-family: 'Traditional Arabic', sans-serif;">{{ verse.verse_text }}</p>
                        </a>
                    {% endfor %}
                </div>
            {% else %}
                <div class="alert alert-info">No results found for "{{ results.query }}"</div>
            {% endif %}
        </div>
    </div>
    {% elif query %}
    <div class="alert alert-warning">No results found for your search query.</div>
    {% endif %}
    
    <div class="card mt-4">
        <div class="card-header bg-light">
            <h5 class="mb-0">Common Searches</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-4">
                    <div class="list-group">
                        <a href="/arabic/search?q=يسوع" class="list-group-item list-group-item-action">يسوع (Jesus)</a>
                        <a href="/arabic/search?q=محبة" class="list-group-item list-group-item-action">محبة (love)</a>
                        <a href="/arabic/search?q=إيمان" class="list-group-item list-group-item-action">إيمان (faith)</a>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="list-group">
                        <a href="/arabic/search?q=سلام" class="list-group-item list-group-item-action">سلام (peace)</a>
                        <a href="/arabic/search?q=الله" class="list-group-item list-group-item-action">الله (God)</a>
                        <a href="/arabic/search?q=روح" class="list-group-item list-group-item-action">روح (spirit)</a>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="list-group">
                        <a href="/arabic/search?q=صلاة" class="list-group-item list-group-item-action">صلاة (prayer)</a>
                        <a href="/arabic/search?q=خلاص" class="list-group-item list-group-item-action">خلاص (salvation)</a>
                        <a href="/arabic/search?q=نعمة" class="list-group-item list-group-item-action">نعمة (grace)</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 